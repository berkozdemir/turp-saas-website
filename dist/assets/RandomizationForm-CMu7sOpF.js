import{ab as B,n as ne,o as de,j as e,q as V,ac as ce,p as w,u as A,ad as le,s as I,v as me,y as ue,ae as he,af as q,ag as pe}from"./vendor-radix-5f5J-VkS.js";import{r as h,f as xe}from"./vendor-react-CL8c0dpX.js";import{a as O,b as D,p as fe,c as ve,$ as je,d as U,o as ye,e as k,f as ge,s as g,_ as M,n as G,u as be}from"./vendor-forms-DA0B5alq.js";import{ac as C,an as Fe,o as Ne,ao as ze,a9 as Re,af as ke,ag as Pe,ah as Ce,aj as we,ai as Se,ak as R,ap as E,ad as Ee,ab as Ie,aq as _e,ar as Ae}from"./index-21RUuat3.js";import{L as c}from"./label-kpl7Eizf.js";import{u as Te}from"./vendor-i18n-CBQczT3A.js";import"./vendor-utils-BznqKjY6.js";import"./vendor-markdown-BCFZJOKS.js";function L(s,n){try{var r=s()}catch(t){return n(t)}return r&&r.then?r.then(void 0,n):r}function Oe(s,n){for(var r={};s.length;){var t=s[0],d=t.code,o=t.message,a=t.path.join(".");if(!r[a])if("unionErrors"in t){var l=t.unionErrors[0].errors[0];r[a]={message:l.message,type:l.code}}else r[a]={message:o,type:d};if("unionErrors"in t&&t.unionErrors.forEach(function(i){return i.errors.forEach(function(p){return s.push(p)})}),n){var m=r[a].types,u=m&&m[t.code];r[a]=U(a,n,r,d,u?[].concat(u,t.message):t.message)}s.shift()}return r}function De(s,n){for(var r={};s.length;){var t=s[0],d=t.code,o=t.message,a=t.path.join(".");if(!r[a])if(t.code==="invalid_union"&&t.errors.length>0){var l=t.errors[0][0];r[a]={message:l.message,type:l.code}}else r[a]={message:o,type:d};if(t.code==="invalid_union"&&t.errors.forEach(function(i){return i.forEach(function(p){return s.push(p)})}),n){var m=r[a].types,u=m&&m[t.code];r[a]=U(a,n,r,d,u?[].concat(u,t.message):t.message)}s.shift()}return r}function Me(s,n,r){if(r===void 0&&(r={}),(function(t){return"_def"in t&&typeof t._def=="object"&&"typeName"in t._def})(s))return function(t,d,o){try{return Promise.resolve(L(function(){return Promise.resolve(s[r.mode==="sync"?"parse":"parseAsync"](t,n)).then(function(a){return o.shouldUseNativeValidation&&O({},o),{errors:{},values:r.raw?Object.assign({},t):a}})},function(a){if((function(l){return Array.isArray(l?.issues)})(a))return{values:{},errors:D(Oe(a.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw a}))}catch(a){return Promise.reject(a)}};if((function(t){return"_zod"in t&&typeof t._zod=="object"})(s))return function(t,d,o){try{return Promise.resolve(L(function(){return Promise.resolve((r.mode==="sync"?fe:ve)(s,t,n)).then(function(a){return o.shouldUseNativeValidation&&O({},o),{errors:{},values:r.raw?Object.assign({},t):a}})},function(a){if((function(l){return l instanceof je})(a))return{values:{},errors:D(De(a.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw a}))}catch(a){return Promise.reject(a)}};throw new Error("Invalid input: not a Zod schema")}var T="Radio",[Ge,H]=V(T),[Le,Be]=Ge(T),K=h.forwardRef((s,n)=>{const{__scopeRadio:r,name:t,checked:d=!1,required:o,disabled:a,value:l="on",onCheck:m,form:u,...i}=s,[p,y]=h.useState(null),x=A(n,N=>y(N)),f=h.useRef(!1),j=p?u||!!p.closest("form"):!0;return e.jsxs(Le,{scope:r,checked:d,disabled:a,children:[e.jsx(w.button,{type:"button",role:"radio","aria-checked":d,"data-state":X(d),"data-disabled":a?"":void 0,disabled:a,value:l,...i,ref:x,onClick:I(s.onClick,N=>{d||m?.(),j&&(f.current=N.isPropagationStopped(),f.current||N.stopPropagation())})}),j&&e.jsx(Z,{control:p,bubbles:!f.current,name:t,value:l,checked:d,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});K.displayName=T;var $="RadioIndicator",W=h.forwardRef((s,n)=>{const{__scopeRadio:r,forceMount:t,...d}=s,o=Be($,r);return e.jsx(me,{present:t||o.checked,children:e.jsx(w.span,{"data-state":X(o.checked),"data-disabled":o.disabled?"":void 0,...d,ref:n})})});W.displayName=$;var Ve="RadioBubbleInput",Z=h.forwardRef(({__scopeRadio:s,control:n,checked:r,bubbles:t=!0,...d},o)=>{const a=h.useRef(null),l=A(a,o),m=ue(r),u=he(n);return h.useEffect(()=>{const i=a.current;if(!i)return;const p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(m!==r&&x){const f=new Event("click",{bubbles:t});x.call(i,r),i.dispatchEvent(f)}},[m,r,t]),e.jsx(w.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...d,tabIndex:-1,ref:l,style:{...d.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Z.displayName=Ve;function X(s){return s?"checked":"unchecked"}var qe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],S="RadioGroup",[Ue]=V(S,[B,H]),Y=B(),J=H(),[He,Ke]=Ue(S),Q=h.forwardRef((s,n)=>{const{__scopeRadioGroup:r,name:t,defaultValue:d,value:o,required:a=!1,disabled:l=!1,orientation:m,dir:u,loop:i=!0,onValueChange:p,...y}=s,x=Y(r),f=ne(u),[j,N]=de({prop:o,defaultProp:d??null,onChange:p,caller:S});return e.jsx(He,{scope:r,name:t,required:a,disabled:l,value:j,onValueChange:N,children:e.jsx(ce,{asChild:!0,...x,orientation:m,dir:f,loop:i,children:e.jsx(w.div,{role:"radiogroup","aria-required":a,"aria-orientation":m,"data-disabled":l?"":void 0,dir:f,...y,ref:n})})})});Q.displayName=S;var ee="RadioGroupItem",re=h.forwardRef((s,n)=>{const{__scopeRadioGroup:r,disabled:t,...d}=s,o=Ke(ee,r),a=o.disabled||t,l=Y(r),m=J(r),u=h.useRef(null),i=A(n,u),p=o.value===d.value,y=h.useRef(!1);return h.useEffect(()=>{const x=j=>{qe.includes(j.key)&&(y.current=!0)},f=()=>y.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",f)}},[]),e.jsx(le,{asChild:!0,...l,focusable:!a,active:p,children:e.jsx(K,{disabled:a,required:o.required,checked:p,...m,...d,name:o.name,ref:i,onCheck:()=>o.onValueChange(d.value),onKeyDown:I(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:I(d.onFocus,()=>{y.current&&u.current?.click()})})})});re.displayName=ee;var $e="RadioGroupIndicator",ae=h.forwardRef((s,n)=>{const{__scopeRadioGroup:r,...t}=s,d=J(r);return e.jsx(W,{...d,...t,ref:n})});ae.displayName=$e;var te=Q,se=re,We=ae;const _=h.forwardRef(({className:s,...n},r)=>e.jsx(te,{className:C("grid gap-2",s),...n,ref:r}));_.displayName=te.displayName;const F=h.forwardRef(({className:s,...n},r)=>e.jsx(se,{ref:r,className:C("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:e.jsx(We,{className:"flex items-center justify-center",children:e.jsx(Fe,{className:"h-2.5 w-2.5 fill-current text-current"})})}));F.displayName=se.displayName;const b=h.forwardRef(({className:s,...n},r)=>e.jsx(q,{ref:r,className:C("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:e.jsx(pe,{className:C("flex items-center justify-center text-current"),children:e.jsx(Ne,{className:"h-4 w-4"})})}));b.displayName=q.displayName;const tr=()=>{const{toast:s}=ze(),n=xe(),{t:r}=Te(),[t,d]=h.useState(!1),o=h.useMemo(()=>ye({contactPerson:g().trim().min(1,r("randomizationForm.validation.contactPerson")).max(200),institution:g().trim().min(1,r("randomizationForm.validation.institution")).max(300),phone:g().trim().min(1,r("randomizationForm.validation.phone")).max(20),email:g().trim().email(r("randomizationForm.validation.email")).max(255),studyName:g().trim().min(1,r("randomizationForm.validation.studyName")).max(500),studyType:M(["rct","observational","other"],{required_error:r("randomizationForm.validation.studyType")}),studyTypeOther:g().max(200).optional(),treatmentArms:G().min(2,r("randomizationForm.validation.treatmentArms")).max(100),totalParticipants:G().min(1,r("randomizationForm.validation.totalParticipants")).max(1e6),hasStratification:k(),stratificationFactors:g().max(1e3).optional(),randomizationMethod:M(["simple","block","stratified","adaptive","help"],{required_error:r("randomizationForm.validation.randomizationMethod")}),blockSize:g().max(100).optional(),hasBlinding:k(),blindingDetails:g().max(500).optional(),emergencyCodeOpening:k(),inventoryIntegration:k(),reportingPreferences:ge(g()).min(1,r("randomizationForm.validation.reportingPreferences")),testRun:k()}),[r]),{register:a,handleSubmit:l,watch:m,setValue:u,formState:{errors:i}}=be({resolver:Me(o),defaultValues:{contactPerson:"",institution:"",phone:"",email:"",hasStratification:!1,hasBlinding:!1,emergencyCodeOpening:!1,inventoryIntegration:!1,testRun:!1,reportingPreferences:[]}}),p=m("studyType"),y=m("hasStratification"),x=m("hasBlinding"),f=m("randomizationMethod"),j=m("reportingPreferences")||[],N=async v=>{d(!0);try{const{session:z}=await _e.getSession();if(!z){s({title:r("randomizationForm.authError"),description:r("randomizationForm.authErrorDesc"),variant:"destructive"}),n("/auth");return}await Ae.submit(v),s({title:r("randomizationForm.successTitle"),description:r("randomizationForm.success")}),n("/")}catch(z){console.error("Form submission error:",z),s({title:r("randomizationForm.errorTitle"),description:z.message||r("randomizationForm.error"),variant:"destructive"})}finally{d(!1)}},P=v=>{const z=j||[],ie=z.includes(v)?z.filter(oe=>oe!==v):[...z,v];u("reportingPreferences",ie)};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(Re,{}),e.jsx("main",{className:"flex-grow container mx-auto px-4 py-16",children:e.jsxs(ke,{className:"max-w-4xl mx-auto",children:[e.jsxs(Pe,{children:[e.jsx(Ce,{className:"text-3xl font-bold",children:r("randomizationForm.title")}),e.jsx(we,{children:r("randomizationForm.description")})]}),e.jsx(Se,{children:e.jsxs("form",{onSubmit:l(N),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 border-b border-border pb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:r("randomizationForm.contactInfo")}),e.jsxs("div",{children:[e.jsxs(c,{htmlFor:"contactPerson",children:[r("randomizationForm.fullName")," *"]}),e.jsx(R,{id:"contactPerson",placeholder:r("randomizationForm.fullNamePlaceholder"),...a("contactPerson")}),i.contactPerson&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.contactPerson.message})]}),e.jsxs("div",{children:[e.jsxs(c,{htmlFor:"institution",children:[r("randomizationForm.institution")," *"]}),e.jsx(R,{id:"institution",placeholder:r("randomizationForm.institutionPlaceholder"),...a("institution")}),i.institution&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.institution.message})]}),e.jsxs("div",{children:[e.jsxs(c,{htmlFor:"phone",children:[r("randomizationForm.phone")," *"]}),e.jsx(R,{id:"phone",placeholder:"+90 555 555 55 55",...a("phone")}),i.phone&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.phone.message})]}),e.jsxs("div",{children:[e.jsxs(c,{htmlFor:"email",children:[r("randomizationForm.email")," *"]}),e.jsx(R,{id:"email",type:"email",placeholder:"ornek@email.com",...a("email")}),i.email&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.email.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"studyName",children:[r("randomizationForm.studyNameLabel")," *"]}),e.jsx(E,{id:"studyName",...a("studyName"),placeholder:r("randomizationForm.studyNamePlaceholder"),className:"min-h-20"}),i.studyName&&e.jsx("p",{className:"text-sm text-destructive",children:i.studyName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{children:[r("randomizationForm.studyTypeLabel")," *"]}),e.jsxs(_,{value:p,onValueChange:v=>u("studyType",v),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"rct",id:"rct"}),e.jsx(c,{htmlFor:"rct",children:r("randomizationForm.studyTypeRCT")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"observational",id:"observational"}),e.jsx(c,{htmlFor:"observational",children:r("randomizationForm.studyTypeObservational")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"other",id:"other"}),e.jsx(c,{htmlFor:"other",children:r("randomizationForm.studyTypeOther")})]})]}),p==="other"&&e.jsx(R,{...a("studyTypeOther"),placeholder:r("randomizationForm.studyTypeOtherPlaceholder"),className:"mt-2"}),i.studyType&&e.jsx("p",{className:"text-sm text-destructive",children:i.studyType.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"treatmentArms",children:[r("randomizationForm.treatmentArmsLabel")," *"]}),e.jsx(R,{id:"treatmentArms",type:"number",min:"2",...a("treatmentArms"),placeholder:"2"}),i.treatmentArms&&e.jsx("p",{className:"text-sm text-destructive",children:i.treatmentArms.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"totalParticipants",children:[r("randomizationForm.totalParticipants")," *"]}),e.jsx(R,{id:"totalParticipants",type:"number",min:"1",...a("totalParticipants"),placeholder:"100"}),i.totalParticipants&&e.jsx("p",{className:"text-sm text-destructive",children:i.totalParticipants.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:r("randomizationForm.stratificationLabel")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"hasStratification",checked:y,onCheckedChange:v=>u("hasStratification",v)}),e.jsx(c,{htmlFor:"hasStratification",children:r("randomizationForm.stratification")})]}),y&&e.jsx(E,{...a("stratificationFactors"),placeholder:r("randomizationForm.stratificationFactorsPlaceholder"),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{children:[r("randomizationForm.randomizationMethodLabel")," *"]}),e.jsxs(_,{value:f,onValueChange:v=>u("randomizationMethod",v),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"simple",id:"simple"}),e.jsx(c,{htmlFor:"simple",children:r("randomizationForm.methodSimple")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"block",id:"block"}),e.jsx(c,{htmlFor:"block",children:r("randomizationForm.methodBlock")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"stratified",id:"stratified"}),e.jsx(c,{htmlFor:"stratified",children:r("randomizationForm.methodStratified")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"adaptive",id:"adaptive"}),e.jsx(c,{htmlFor:"adaptive",children:r("randomizationForm.methodAdaptive")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"help",id:"help"}),e.jsx(c,{htmlFor:"help",children:r("randomizationForm.methodHelp")})]})]}),f==="block"&&e.jsxs("div",{className:"mt-2",children:[e.jsx(c,{htmlFor:"blockSize",children:r("randomizationForm.blockSizeLabel")}),e.jsx(R,{id:"blockSize",...a("blockSize"),placeholder:r("randomizationForm.blockSizePlaceholder")})]}),i.randomizationMethod&&e.jsx("p",{className:"text-sm text-destructive",children:i.randomizationMethod.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:r("randomizationForm.blindingLabel")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"hasBlinding",checked:x,onCheckedChange:v=>u("hasBlinding",v)}),e.jsx(c,{htmlFor:"hasBlinding",children:r("randomizationForm.blinding")})]}),x&&e.jsx(E,{...a("blindingDetails"),placeholder:r("randomizationForm.blindingDetailsPlaceholder"),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-4 border-t border-border pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:r("randomizationForm.additionalOptions")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"emergencyCodeOpening",...a("emergencyCodeOpening")}),e.jsx(c,{htmlFor:"emergencyCodeOpening",children:r("randomizationForm.emergencyCodeOpening")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"inventoryIntegration",...a("inventoryIntegration")}),e.jsx(c,{htmlFor:"inventoryIntegration",children:r("randomizationForm.inventoryIntegration")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{children:[r("randomizationForm.reportingPreferencesLabel")," *"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"daily",checked:j.includes("daily"),onCheckedChange:()=>P("daily")}),e.jsx(c,{htmlFor:"daily",children:r("randomizationForm.reportingDaily")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"weekly",checked:j.includes("weekly"),onCheckedChange:()=>P("weekly")}),e.jsx(c,{htmlFor:"weekly",children:r("randomizationForm.reportingWeekly")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"monthly",checked:j.includes("monthly"),onCheckedChange:()=>P("monthly")}),e.jsx(c,{htmlFor:"monthly",children:r("randomizationForm.reportingMonthly")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"onDemand",checked:j.includes("onDemand"),onCheckedChange:()=>P("onDemand")}),e.jsx(c,{htmlFor:"onDemand",children:r("randomizationForm.reportingOnDemand")})]})]}),i.reportingPreferences&&e.jsx("p",{className:"text-sm text-destructive",children:i.reportingPreferences.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"testRun",...a("testRun")}),e.jsx(c,{htmlFor:"testRun",children:r("randomizationForm.testRunLabel")})]})]}),e.jsx(Ee,{type:"submit",className:"w-full",disabled:t,children:r(t?"randomizationForm.submitting":"randomizationForm.submit")})]})})]})}),e.jsx(Ie,{})]})};export{tr as default};
