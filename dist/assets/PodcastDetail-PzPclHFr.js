import{j as e}from"./vendor-radix-5f5J-VkS.js";import{j as E,f as P,r}from"./vendor-react-CL8c0dpX.js";import{a7 as S,L,D as f,A as C,a8 as D,H as $,C as A,m as I,a0 as B,w as F}from"./index-21RUuat3.js";import{E as o}from"./external-link-BqLH92I7.js";import{I as T}from"./image-Ce6ZJ5kB.js";import"./vendor-i18n-CBQczT3A.js";import"./vendor-utils-BznqKjY6.js";import"./vendor-forms-DA0B5alq.js";import"./vendor-markdown-BCFZJOKS.js";const O=()=>{const{slug:i}=E(),c=P(),{playEpisode:g,currentEpisode:d,isPlaying:b,togglePlay:j}=S(),[s,v]=r.useState(null),[N,m]=r.useState(!0),[x,p]=r.useState(null),[u,h]=r.useState(null),n="/api",y=n.endsWith("/index.php")?n:`${n}/index.php`;r.useEffect(()=>{(async()=>{if(i){m(!0);try{const a=await(await fetch(`${y}?action=get_podcast_public&slug=${i}`)).json();a.success&&a.data?v(a.data):p("Podcast bulunamadı")}catch(l){console.error("Failed to fetch podcast:",l),p("Yüklenirken bir hata oluştu")}finally{m(!1)}}})()},[i]);const _=t=>{if(!t)return"";const l=Math.floor(t/60),a=t%60;return`${l}:${a.toString().padStart(2,"0")}`},k=t=>t?new Date(t).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"",w=()=>{s?.audio_url&&(d?.id===s.id?j():g(s))},z=d?.id===s?.id;return N?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:e.jsx(L,{className:"animate-spin text-purple-600",size:48})}):x||!s?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 px-4",children:[e.jsx(f,{size:64,className:"text-slate-300 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-2",children:x||"Podcast bulunamadı"}),e.jsx("button",{onClick:()=>c("/podcast"),className:"mt-4 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Podcaste Geri Dön"})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[e.jsx("div",{className:"bg-gradient-to-br from-indigo-900 via-purple-900 to-slate-900 text-white",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-6",children:e.jsxs("button",{onClick:()=>c("/podcast"),className:"flex items-center gap-2 text-white/70 hover:text-white transition-colors",children:[e.jsx(C,{size:18}),"Tüm Bölümler"]})})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-8",children:[e.jsx("div",{className:"aspect-square rounded-2xl overflow-hidden bg-slate-100 shadow-xl mb-6",children:s.cover_image_url?e.jsx("img",{src:s.cover_image_url,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-100 to-pink-100",children:e.jsx(f,{size:80,className:"text-purple-300"})})}),s.audio_url?e.jsx("button",{onClick:w,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-xl hover:opacity-90 transition-opacity flex items-center justify-center gap-3 shadow-lg",children:z&&b?e.jsxs(e.Fragment,{children:[e.jsx(D,{size:24}),"Duraklat"]}):e.jsxs(e.Fragment,{children:[e.jsx($,{size:24}),"Dinle"]})}):e.jsx("p",{className:"text-center text-slate-500 text-sm",children:"Ses dosyası mevcut değil"}),s.external_links&&Object.values(s.external_links).some(Boolean)&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[s.external_links.spotify&&e.jsxs("a",{href:s.external_links.spotify,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(o,{size:14}),"Spotify"]}),s.external_links.apple&&e.jsxs("a",{href:s.external_links.apple,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg text-sm font-medium hover:bg-purple-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(o,{size:14}),"Apple"]}),s.external_links.youtube&&e.jsxs("a",{href:s.external_links.youtube,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(o,{size:14}),"YouTube"]})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-sm text-slate-500",children:[s.publish_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{size:16}),k(s.publish_date)]}),s.duration_seconds&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:16}),_(s.duration_seconds)]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:s.tags.map(t=>e.jsx("span",{className:"px-3 py-1 bg-purple-50 text-purple-600 rounded-full text-xs font-medium",children:t},t))})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-6",children:s.title}),s.short_description&&e.jsx("p",{className:"text-lg text-slate-600 mb-8 leading-relaxed",children:s.short_description}),s.full_description&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Bölüm Notları"}),e.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:s.full_description}})]}),s.extra_images&&s.extra_images.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(T,{size:20}),"Ek Görseller"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:s.extra_images.map((t,l)=>e.jsx("button",{onClick:()=>h(t),className:"aspect-video rounded-lg overflow-hidden bg-slate-100 hover:opacity-90 transition-opacity",children:e.jsx("img",{src:t,alt:`Görsel ${l+1}`,className:"w-full h-full object-cover"})},l))})]}),s.extra_videos&&s.extra_videos.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(B,{size:20}),"Ek Videolar"]}),e.jsx("div",{className:"space-y-4",children:s.extra_videos.map((t,l)=>e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-slate-900",children:t.includes("youtube.com")||t.includes("youtu.be")?e.jsx("iframe",{src:t.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/"),className:"w-full h-full",allowFullScreen:!0,title:`Video ${l+1}`}):t.includes("vimeo.com")?e.jsx("iframe",{src:t.replace("vimeo.com","player.vimeo.com/video"),className:"w-full h-full",allowFullScreen:!0,title:`Video ${l+1}`}):e.jsx("video",{src:t,controls:!0,className:"w-full h-full"})},l))})]}),e.jsx("div",{className:"mt-12 p-6 bg-amber-50 border border-amber-200 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{size:24,className:"text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-amber-800 mb-1",children:"Önemli Bilgilendirme"}),e.jsx("p",{className:"text-amber-700 text-sm leading-relaxed",children:"Bu podcast bölümü genel bilgilendirme amaçlıdır ve kişisel tıbbi tavsiye yerine geçmez. Kararlarınızı her zaman kendi hekiminizle birlikte verin."})]})]})})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:()=>h(null),children:e.jsx("img",{src:u,alt:"Lightbox",className:"max-w-full max-h-full object-contain"})})]})};export{O as PodcastDetail,O as default};
