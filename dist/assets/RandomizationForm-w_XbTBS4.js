import{ab as G,n as re,o as ie,j as e,q as M,ac as se,p as S,u as E,ad as oe,s as A,v as ne,y as de,ae as ce,af as L,ag as le}from"./vendor-radix-qxIl5h-v.js";import{r as d,f as me}from"./vendor-react-Dt9o8Ni5.js";import{o as ue,b as k,a as he,s as g,_ as D,n as O,u as pe}from"./vendor-forms-CJaTxEnb.js";import{a as xe}from"./zod-CxgM3QOf.js";import{af as P,aq as fe,n as ve,ar as je,ac as ye,ai as ge,aj as be,ak as Fe,am as Ne,al as ze,an as R,as as I,ag as Re,ae as ke,at as Ce,au as Pe}from"./index-D1pfzlRg.js";import{L as r}from"./label-CKZrqaX2.js";import{u as Se}from"./vendor-i18n-vL7LjlWW.js";import"./vendor-utils-BznqKjY6.js";import"./vendor-markdown-DGnlj1uy.js";var _="Radio",[we,B]=M(_),[Ie,Ae]=we(_),q=d.forwardRef((s,n)=>{const{__scopeRadio:a,name:l,checked:o=!1,required:c,disabled:i,value:j="on",onCheck:m,form:u,...t}=s,[x,y]=d.useState(null),h=E(n,N=>y(N)),p=d.useRef(!1),v=x?u||!!x.closest("form"):!0;return e.jsxs(Ie,{scope:a,checked:o,disabled:i,children:[e.jsx(S.button,{type:"button",role:"radio","aria-checked":o,"data-state":U(o),"data-disabled":i?"":void 0,disabled:i,value:j,...t,ref:h,onClick:A(s.onClick,N=>{o||m?.(),v&&(p.current=N.isPropagationStopped(),p.current||N.stopPropagation())})}),v&&e.jsx(K,{control:x,bubbles:!p.current,name:l,value:j,checked:o,required:c,disabled:i,form:u,style:{transform:"translateX(-100%)"}})]})});q.displayName=_;var V="RadioIndicator",H=d.forwardRef((s,n)=>{const{__scopeRadio:a,forceMount:l,...o}=s,c=Ae(V,a);return e.jsx(ne,{present:l||c.checked,children:e.jsx(S.span,{"data-state":U(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:n})})});H.displayName=V;var Te="RadioBubbleInput",K=d.forwardRef(({__scopeRadio:s,control:n,checked:a,bubbles:l=!0,...o},c)=>{const i=d.useRef(null),j=E(i,c),m=de(a),u=ce(n);return d.useEffect(()=>{const t=i.current;if(!t)return;const x=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(x,"checked").set;if(m!==a&&h){const p=new Event("click",{bubbles:l});h.call(t,a),t.dispatchEvent(p)}},[m,a,l]),e.jsx(S.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:j,style:{...o.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});K.displayName=Te;function U(s){return s?"checked":"unchecked"}var Ee=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],w="RadioGroup",[_e]=M(w,[G,B]),$=G(),W=B(),[De,Oe]=_e(w),X=d.forwardRef((s,n)=>{const{__scopeRadioGroup:a,name:l,defaultValue:o,value:c,required:i=!1,disabled:j=!1,orientation:m,dir:u,loop:t=!0,onValueChange:x,...y}=s,h=$(a),p=re(u),[v,N]=ie({prop:c,defaultProp:o??null,onChange:x,caller:w});return e.jsx(De,{scope:a,name:l,required:i,disabled:j,value:v,onValueChange:N,children:e.jsx(se,{asChild:!0,...h,orientation:m,dir:p,loop:t,children:e.jsx(S.div,{role:"radiogroup","aria-required":i,"aria-orientation":m,"data-disabled":j?"":void 0,dir:p,...y,ref:n})})})});X.displayName=w;var Y="RadioGroupItem",J=d.forwardRef((s,n)=>{const{__scopeRadioGroup:a,disabled:l,...o}=s,c=Oe(Y,a),i=c.disabled||l,j=$(a),m=W(a),u=d.useRef(null),t=E(n,u),x=c.value===o.value,y=d.useRef(!1);return d.useEffect(()=>{const h=v=>{Ee.includes(v.key)&&(y.current=!0)},p=()=>y.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",p)}},[]),e.jsx(oe,{asChild:!0,...j,focusable:!i,active:x,children:e.jsx(q,{disabled:i,required:c.required,checked:x,...m,...o,name:c.name,ref:t,onCheck:()=>c.onValueChange(o.value),onKeyDown:A(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:A(o.onFocus,()=>{y.current&&u.current?.click()})})})});J.displayName=Y;var Ge="RadioGroupIndicator",Q=d.forwardRef((s,n)=>{const{__scopeRadioGroup:a,...l}=s,o=W(a);return e.jsx(H,{...o,...l,ref:n})});Q.displayName=Ge;var Z=X,ee=J,Me=Q;const T=d.forwardRef(({className:s,...n},a)=>e.jsx(Z,{className:P("grid gap-2",s),...n,ref:a}));T.displayName=Z.displayName;const F=d.forwardRef(({className:s,...n},a)=>e.jsx(ee,{ref:a,className:P("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:e.jsx(Me,{className:"flex items-center justify-center",children:e.jsx(fe,{className:"h-2.5 w-2.5 fill-current text-current"})})}));F.displayName=ee.displayName;const b=d.forwardRef(({className:s,...n},a)=>e.jsx(L,{ref:a,className:P("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:e.jsx(le,{className:P("flex items-center justify-center text-current"),children:e.jsx(ve,{className:"h-4 w-4"})})}));b.displayName=L.displayName;const Xe=()=>{const{toast:s}=je(),n=me(),{t:a}=Se(),[l,o]=d.useState(!1),c=d.useMemo(()=>ue({contactPerson:g().trim().min(1,a("randomizationForm.validation.contactPerson")).max(200),institution:g().trim().min(1,a("randomizationForm.validation.institution")).max(300),phone:g().trim().min(1,a("randomizationForm.validation.phone")).max(20),email:g().trim().email(a("randomizationForm.validation.email")).max(255),studyName:g().trim().min(1,a("randomizationForm.validation.studyName")).max(500),studyType:D(["rct","observational","other"],{required_error:a("randomizationForm.validation.studyType")}),studyTypeOther:g().max(200).optional(),treatmentArms:O().min(2,a("randomizationForm.validation.treatmentArms")).max(100),totalParticipants:O().min(1,a("randomizationForm.validation.totalParticipants")).max(1e6),hasStratification:k(),stratificationFactors:g().max(1e3).optional(),randomizationMethod:D(["simple","block","stratified","adaptive","help"],{required_error:a("randomizationForm.validation.randomizationMethod")}),blockSize:g().max(100).optional(),hasBlinding:k(),blindingDetails:g().max(500).optional(),emergencyCodeOpening:k(),inventoryIntegration:k(),reportingPreferences:he(g()).min(1,a("randomizationForm.validation.reportingPreferences")),testRun:k()}),[a]),{register:i,handleSubmit:j,watch:m,setValue:u,formState:{errors:t}}=pe({resolver:xe(c),defaultValues:{contactPerson:"",institution:"",phone:"",email:"",hasStratification:!1,hasBlinding:!1,emergencyCodeOpening:!1,inventoryIntegration:!1,testRun:!1,reportingPreferences:[]}}),x=m("studyType"),y=m("hasStratification"),h=m("hasBlinding"),p=m("randomizationMethod"),v=m("reportingPreferences")||[],N=async f=>{o(!0);try{const{session:z}=await Ce.getSession();if(!z){s({title:a("randomizationForm.authError"),description:a("randomizationForm.authErrorDesc"),variant:"destructive"}),n("/auth");return}await Pe.submit(f),s({title:a("randomizationForm.successTitle"),description:a("randomizationForm.success")}),n("/")}catch(z){console.error("Form submission error:",z),s({title:a("randomizationForm.errorTitle"),description:z.message||a("randomizationForm.error"),variant:"destructive"})}finally{o(!1)}},C=f=>{const z=v||[],ae=z.includes(f)?z.filter(te=>te!==f):[...z,f];u("reportingPreferences",ae)};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(ye,{}),e.jsx("main",{className:"flex-grow container mx-auto px-4 py-16",children:e.jsxs(ge,{className:"max-w-4xl mx-auto",children:[e.jsxs(be,{children:[e.jsx(Fe,{className:"text-3xl font-bold",children:a("randomizationForm.title")}),e.jsx(Ne,{children:a("randomizationForm.description")})]}),e.jsx(ze,{children:e.jsxs("form",{onSubmit:j(N),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 border-b border-border pb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:a("randomizationForm.contactInfo")}),e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"contactPerson",children:[a("randomizationForm.fullName")," *"]}),e.jsx(R,{id:"contactPerson",placeholder:a("randomizationForm.fullNamePlaceholder"),...i("contactPerson")}),t.contactPerson&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.contactPerson.message})]}),e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"institution",children:[a("randomizationForm.institution")," *"]}),e.jsx(R,{id:"institution",placeholder:a("randomizationForm.institutionPlaceholder"),...i("institution")}),t.institution&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.institution.message})]}),e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"phone",children:[a("randomizationForm.phone")," *"]}),e.jsx(R,{id:"phone",placeholder:"+90 555 555 55 55",...i("phone")}),t.phone&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.phone.message})]}),e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"email",children:[a("randomizationForm.email")," *"]}),e.jsx(R,{id:"email",type:"email",placeholder:"ornek@email.com",...i("email")}),t.email&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:t.email.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"studyName",children:[a("randomizationForm.studyNameLabel")," *"]}),e.jsx(I,{id:"studyName",...i("studyName"),placeholder:a("randomizationForm.studyNamePlaceholder"),className:"min-h-20"}),t.studyName&&e.jsx("p",{className:"text-sm text-destructive",children:t.studyName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:[a("randomizationForm.studyTypeLabel")," *"]}),e.jsxs(T,{value:x,onValueChange:f=>u("studyType",f),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"rct",id:"rct"}),e.jsx(r,{htmlFor:"rct",children:a("randomizationForm.studyTypeRCT")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"observational",id:"observational"}),e.jsx(r,{htmlFor:"observational",children:a("randomizationForm.studyTypeObservational")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"other",id:"other"}),e.jsx(r,{htmlFor:"other",children:a("randomizationForm.studyTypeOther")})]})]}),x==="other"&&e.jsx(R,{...i("studyTypeOther"),placeholder:a("randomizationForm.studyTypeOtherPlaceholder"),className:"mt-2"}),t.studyType&&e.jsx("p",{className:"text-sm text-destructive",children:t.studyType.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"treatmentArms",children:[a("randomizationForm.treatmentArmsLabel")," *"]}),e.jsx(R,{id:"treatmentArms",type:"number",min:"2",...i("treatmentArms"),placeholder:"2"}),t.treatmentArms&&e.jsx("p",{className:"text-sm text-destructive",children:t.treatmentArms.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"totalParticipants",children:[a("randomizationForm.totalParticipants")," *"]}),e.jsx(R,{id:"totalParticipants",type:"number",min:"1",...i("totalParticipants"),placeholder:"100"}),t.totalParticipants&&e.jsx("p",{className:"text-sm text-destructive",children:t.totalParticipants.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:a("randomizationForm.stratificationLabel")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"hasStratification",checked:y,onCheckedChange:f=>u("hasStratification",f)}),e.jsx(r,{htmlFor:"hasStratification",children:a("randomizationForm.stratification")})]}),y&&e.jsx(I,{...i("stratificationFactors"),placeholder:a("randomizationForm.stratificationFactorsPlaceholder"),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:[a("randomizationForm.randomizationMethodLabel")," *"]}),e.jsxs(T,{value:p,onValueChange:f=>u("randomizationMethod",f),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"simple",id:"simple"}),e.jsx(r,{htmlFor:"simple",children:a("randomizationForm.methodSimple")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"block",id:"block"}),e.jsx(r,{htmlFor:"block",children:a("randomizationForm.methodBlock")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"stratified",id:"stratified"}),e.jsx(r,{htmlFor:"stratified",children:a("randomizationForm.methodStratified")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"adaptive",id:"adaptive"}),e.jsx(r,{htmlFor:"adaptive",children:a("randomizationForm.methodAdaptive")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"help",id:"help"}),e.jsx(r,{htmlFor:"help",children:a("randomizationForm.methodHelp")})]})]}),p==="block"&&e.jsxs("div",{className:"mt-2",children:[e.jsx(r,{htmlFor:"blockSize",children:a("randomizationForm.blockSizeLabel")}),e.jsx(R,{id:"blockSize",...i("blockSize"),placeholder:a("randomizationForm.blockSizePlaceholder")})]}),t.randomizationMethod&&e.jsx("p",{className:"text-sm text-destructive",children:t.randomizationMethod.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:a("randomizationForm.blindingLabel")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"hasBlinding",checked:h,onCheckedChange:f=>u("hasBlinding",f)}),e.jsx(r,{htmlFor:"hasBlinding",children:a("randomizationForm.blinding")})]}),h&&e.jsx(I,{...i("blindingDetails"),placeholder:a("randomizationForm.blindingDetailsPlaceholder"),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-4 border-t border-border pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:a("randomizationForm.additionalOptions")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"emergencyCodeOpening",...i("emergencyCodeOpening")}),e.jsx(r,{htmlFor:"emergencyCodeOpening",children:a("randomizationForm.emergencyCodeOpening")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"inventoryIntegration",...i("inventoryIntegration")}),e.jsx(r,{htmlFor:"inventoryIntegration",children:a("randomizationForm.inventoryIntegration")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:[a("randomizationForm.reportingPreferencesLabel")," *"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"daily",checked:v.includes("daily"),onCheckedChange:()=>C("daily")}),e.jsx(r,{htmlFor:"daily",children:a("randomizationForm.reportingDaily")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"weekly",checked:v.includes("weekly"),onCheckedChange:()=>C("weekly")}),e.jsx(r,{htmlFor:"weekly",children:a("randomizationForm.reportingWeekly")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"monthly",checked:v.includes("monthly"),onCheckedChange:()=>C("monthly")}),e.jsx(r,{htmlFor:"monthly",children:a("randomizationForm.reportingMonthly")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"onDemand",checked:v.includes("onDemand"),onCheckedChange:()=>C("onDemand")}),e.jsx(r,{htmlFor:"onDemand",children:a("randomizationForm.reportingOnDemand")})]})]}),t.reportingPreferences&&e.jsx("p",{className:"text-sm text-destructive",children:t.reportingPreferences.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{id:"testRun",...i("testRun")}),e.jsx(r,{htmlFor:"testRun",children:a("randomizationForm.testRunLabel")})]})]}),e.jsx(Re,{type:"submit",className:"w-full",disabled:l,children:a(l?"randomizationForm.submitting":"randomizationForm.submit")})]})})]})}),e.jsx(ke,{})]})};export{Xe as default};
