import{j as e}from"./vendor-radix-qxIl5h-v.js";import{r as u}from"./vendor-react-Dt9o8Ni5.js";import{M as b}from"./message-circle-ZaUshX9y.js";import{c as N,v,e as S,P as I,F as y,aa as C,V as g,L as j,ab as z,d as L}from"./index-D1pfzlRg.js";import{E as T}from"./external-link-CW_S-kiO.js";import{H as M}from"./help-circle-jQwRuTQR.js";const P=N("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);const _=N("Podcast",[["circle",{cx:"12",cy:"11",r:"1",key:"1gvufo"}],["path",{d:"M11 17a1 1 0 0 1 2 0c0 .5-.34 3-.5 4.5a.5.5 0 0 1-1 0c-.16-1.5-.5-4-.5-4.5Z",key:"1n5fvv"}],["path",{d:"M8 14a5 5 0 1 1 8 0",key:"fc81rn"}],["path",{d:"M17 18.5a9 9 0 1 0-10 0",key:"jqtxkf"}]]),B=({onSubmit:a,isLoading:t=!1})=>{const[i,d]=u.useState({name:"",email:"",phone:""}),[o,x]=u.useState({name:"",email:""}),m=()=>{const n={name:"",email:""};let l=!0;return i.name.trim()||(n.name="Ä°sminizi giriniz",l=!1),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(n.email="GeÃ§erli bir e-posta adresi giriniz",l=!1):(n.email="E-posta adresinizi giriniz",l=!1),x(n),l},r=n=>{n.preventDefault(),m()&&a(i)},s=n=>l=>{d(c=>({...c,[n]:l.target.value})),o[n]&&x(c=>({...c,[n]:""}))};return e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 mb-4",children:e.jsx(b,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"NIPT HakkÄ±nda SorularÄ±nÄ±zÄ± Sorun"}),e.jsx("p",{className:"text-gray-600",children:"Yapay zeka destekli asistanÄ±mÄ±z NIPT testi ve Omega Genetik hakkÄ±ndaki sorularÄ±nÄ±zÄ± yanÄ±tlamaya hazÄ±r."})]}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Ä°sim Soyisim ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"name",value:i.name,onChange:s("name"),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition ${o.name?"border-red-500":"border-gray-300"}`,placeholder:"AdÄ±nÄ±z ve soyadÄ±nÄ±z",disabled:t})]}),o.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["E-posta ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",id:"email",value:i.email,onChange:s("email"),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition ${o.email?"border-red-500":"border-gray-300"}`,placeholder:"ornek@email.com",disabled:t})]}),o.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon (Opsiyonel)"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",id:"phone",value:i.phone,onChange:s("phone"),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"+90 5XX XXX XX XX",disabled:t})]})]}),e.jsx("button",{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"BaÅŸlatÄ±lÄ±yor..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{children:"Sohbete BaÅŸla"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Sohbete baÅŸlayarak size e-posta ile de ulaÅŸabileceÄŸimizi kabul etmiÅŸ olursunuz."})]})},E=({source:a})=>{const t=()=>{switch(a.type){case"podcast":return e.jsx(_,{className:"w-4 h-4"});case"blog":return e.jsx(y,{className:"w-4 h-4"});case"faq":return e.jsx(M,{className:"w-4 h-4"});case"static":return e.jsx(P,{className:"w-4 h-4"});default:return e.jsx(y,{className:"w-4 h-4"})}},i=()=>{switch(a.type){case"podcast":return"Podcast";case"blog":return"Blog";case"faq":return"SSS";case"static":return"Bilgi BankasÄ±";default:return a.type}},d=()=>{switch(a.type){case"podcast":return"bg-purple-50 text-purple-700 border-purple-200";case"blog":return"bg-blue-50 text-blue-700 border-blue-200";case"faq":return"bg-green-50 text-green-700 border-green-200";case"static":return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return a.url?e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-3 py-2 rounded-lg border ${d()} hover:shadow-sm transition-shadow text-xs`,children:[t(),e.jsx("span",{className:"flex-1 font-medium truncate",children:a.title}),e.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-white bg-opacity-50",children:i()}),e.jsx(T,{className:"w-3 h-3 flex-shrink-0"})]}):e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border ${d()} text-xs`,children:[t(),e.jsx("span",{className:"flex-1 font-medium truncate",children:a.title}),e.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-white bg-opacity-50",children:i()})]})},D=({message:a})=>{const t=a.role==="user";return e.jsxs("div",{className:`flex gap-3 ${t?"flex-row-reverse":"flex-row"} mb-4`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${t?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-gray-600 to-gray-700"}`,children:t?e.jsx(v,{className:"w-5 h-5 text-white"}):e.jsx(C,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:`flex-1 max-w-[75%] ${t?"items-end":"items-start"}`,children:[e.jsx("div",{className:`rounded-lg px-4 py-3 ${t?"bg-gradient-to-br from-blue-600 to-purple-600 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:a.content})}),a.created_at&&e.jsx("p",{className:`text-xs text-gray-500 mt-1 ${t?"text-right":"text-left"}`,children:new Date(a.created_at).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}),!t&&a.sources&&a.sources.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Kaynaklar:"}),a.sources.map((i,d)=>e.jsx(E,{source:i},d))]})]})]})};function w(){const[a,t]=u.useState({sessionId:null,conversationId:null,messages:[],isLoading:!1,error:null}),i=u.useCallback(async m=>{t(r=>({...r,isLoading:!0,error:null}));try{const r=await g("chatbot_start",m,"POST");return r.error?(t(s=>({...s,error:r.error,isLoading:!1})),{success:!1,error:r.error}):(t(s=>({...s,sessionId:r.session_id,conversationId:r.conversation_id,isLoading:!1})),{success:!0,sessionId:r.session_id,conversationId:r.conversation_id})}catch(r){const s=r instanceof Error?r.message:"Bir hata oluÅŸtu";return t(n=>({...n,error:s,isLoading:!1})),{success:!1,error:s}}},[]),d=u.useCallback(async m=>{if(!a.sessionId)return{success:!1,error:"Oturum bulunamadÄ±"};t(s=>({...s,isLoading:!0,error:null}));const r={role:"user",content:m,created_at:new Date().toISOString()};t(s=>({...s,messages:[...s.messages,r]}));try{const s=await g("chatbot_send_message",{session_id:a.sessionId,message:m},"POST");if(s.error)return t(l=>({...l,error:s.error,isLoading:!1})),{success:!1,error:s.error};const n={role:"assistant",content:s.reply,sources:s.sources||[],created_at:new Date().toISOString()};return t(l=>({...l,messages:[...l.messages,n],isLoading:!1})),{success:!0,reply:s.reply,sources:s.sources}}catch(s){const n=s instanceof Error?s.message:"Bir hata oluÅŸtu";return t(l=>({...l,error:n,isLoading:!1})),{success:!1,error:n}}},[a.sessionId]),o=u.useCallback(async m=>{t(r=>({...r,isLoading:!0,error:null}));try{const r=await g("chatbot_get_history",{session_id:m});return r.error?(t(s=>({...s,error:r.error,isLoading:!1})),{success:!1,error:r.error}):(t(s=>({...s,messages:r.messages||[],isLoading:!1})),{success:!0,messages:r.messages})}catch(r){const s=r instanceof Error?r.message:"Bir hata oluÅŸtu";return t(n=>({...n,error:s,isLoading:!1})),{success:!1,error:s}}},[]),x=u.useCallback(()=>{t({sessionId:null,conversationId:null,messages:[],isLoading:!1,error:null})},[]);return{...a,startConversation:i,sendMessage:d,getHistory:o,clearConversation:x}}const F=({sessionId:a,conversationId:t,userName:i})=>{const[d,o]=u.useState(""),x=u.useRef(null),{messages:m,isLoading:r,sendMessage:s}=w();u.useEffect(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[m]);const n=async c=>{if(c.preventDefault(),!d.trim()||r)return;const h=d.trim();o(""),await s(h)},l=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),n(c))};return e.jsxs("div",{className:"flex flex-col h-[600px] bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-4 rounded-t-lg",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"NIPT Bilgi AsistanÄ±"}),e.jsxs("p",{className:"text-sm text-blue-100",children:["Merhaba ",i,", size nasÄ±l yardÄ±mcÄ± olabilirim?"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[m.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center px-4",children:[e.jsx("div",{className:"bg-gray-100 rounded-full p-4 mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"SorularÄ±nÄ±zÄ± sorabilirsiniz"}),e.jsx("p",{className:"text-sm text-gray-600 max-w-sm",children:"NIPT testi, hamilelik sÃ¼reci, Omega Genetik hakkÄ±nda merak ettiklerinizi sorabilirsiniz."}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-2 w-full max-w-md",children:[e.jsx("button",{onClick:()=>o("NIPT testi nedir?"),className:"text-left px-4 py-2 bg-gray-50 hover:bg-gray-100 rounded-lg text-sm text-gray-700 transition-colors",children:"ðŸ’­ NIPT testi nedir?"}),e.jsx("button",{onClick:()=>o("NIPT testi nasÄ±l yapÄ±lÄ±r?"),className:"text-left px-4 py-2 bg-gray-50 hover:bg-gray-100 rounded-lg text-sm text-gray-700 transition-colors",children:"ðŸ”¬ NIPT testi nasÄ±l yapÄ±lÄ±r?"}),e.jsx("button",{onClick:()=>o("NIPT test fiyatlarÄ± nedir?"),className:"text-left px-4 py-2 bg-gray-50 hover:bg-gray-100 rounded-lg text-sm text-gray-700 transition-colors",children:"ðŸ’° NIPT test fiyatlarÄ± nedir?"})]})]}):e.jsxs(e.Fragment,{children:[m.map((c,h)=>e.jsx(D,{message:c},h)),r&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-gray-600 to-gray-700 flex items-center justify-center",children:e.jsx(j,{className:"w-5 h-5 text-white animate-spin"})}),e.jsx("div",{className:"bg-gray-100 rounded-lg px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})]}),e.jsx("div",{ref:x})]}),e.jsxs("div",{className:"border-t border-gray-200 px-6 py-4",children:[e.jsxs("form",{onSubmit:n,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:c=>o(c.target.value),onKeyDown:l,placeholder:"MesajÄ±nÄ±zÄ± yazÄ±n...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:r,maxLength:1e3}),e.jsx("button",{type:"submit",disabled:!d.trim()||r,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white p-3 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsx(j,{className:"w-5 h-5 animate-spin"}):e.jsx(z,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"âš ï¸ Bu asistan bilgilendirme amaÃ§lÄ±dÄ±r. TÄ±bbi teÅŸhis koymaz."})]})]})},R=({contextType:a,contextId:t,contextTitle:i})=>{const[d,o]=u.useState(!1),[x,m]=u.useState(null),[r,s]=u.useState(!1),{startConversation:n,sessionId:l,conversationId:c,isLoading:h,error:p}=w(),k=async f=>{m(f),(await n({...f,context_type:a,context_id:t})).success&&(s(!0),setTimeout(()=>{s(!1),o(!0)},3e3))};return r?e.jsxs("div",{className:"max-w-md mx-auto text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100 mb-6",children:e.jsx(L,{className:"w-12 h-12 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"TeÅŸekkÃ¼rler!"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Size e-posta ile de ulaÅŸacaÄŸÄ±z, ",x?.name,"."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sohbet baÅŸlatÄ±lÄ±yor..."})]}):d?!l||!c||!x?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Bir hata oluÅŸtu. LÃ¼tfen sayfayÄ± yenileyin."})}):e.jsx("div",{className:"py-8",children:e.jsx(F,{sessionId:l,conversationId:c,userName:x.name})}):e.jsxs("div",{className:"py-8",children:[e.jsx(B,{onSubmit:k,isLoading:h}),p&&e.jsx("div",{className:"max-w-md mx-auto mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:p})})]})};export{R as P};
