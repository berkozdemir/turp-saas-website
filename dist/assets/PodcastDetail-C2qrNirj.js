import{j as e}from"./vendor-radix-Do91ay3T.js";import{j as P,f as S,r as l}from"./vendor-react-DgOfpg1f.js";import{ad as E,L as C,J as d,ae as L,A as $,O as A,K as D,h as T,E as m,C as B,m as I,H as F,a7 as G,x as M}from"./index-ClIqQmy1.js";import{P as R}from"./PodcastChatTab-D2CSUvxV.js";import{I as V}from"./image-B62N6OLM.js";import"./vendor-i18n-DmRj_g1M.js";import"./vendor-utils-BznqKjY6.js";import"./vendor-forms-Bi3Tom9J.js";import"./vendor-markdown-CjP5FAny.js";const Z=()=>{const{slug:n}=P(),x=S(),{playEpisode:j,currentEpisode:v,isPlaying:N}=E(),[t,y]=l.useState(null),[_,p]=l.useState(!0),[u,h]=l.useState(null),o=!!!localStorage.getItem("enduser_token")&&!!t?.preview_clip_url,[g,b]=l.useState(null),[i,f]=l.useState("content"),c="/api",k=c.endsWith("/index.php")?c:`${c}/index.php`;l.useEffect(()=>{(async()=>{if(n){p(!0);try{const r=await(await fetch(`${k}?action=get_podcast_public&slug=${n}`)).json();r.success&&r.data?y(r.data):h("Podcast bulunamadı")}catch(a){console.error("Failed to fetch podcast:",a),h("Yüklenirken bir hata oluştu")}finally{p(!1)}}})()},[n]);const w=s=>{if(!s)return"";const a=Math.floor(s/60),r=s%60;return`${a}:${r.toString().padStart(2,"0")}`},z=s=>s?new Date(s).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"";return _?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:e.jsx(C,{className:"animate-spin text-purple-600",size:48})}):u||!t?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 px-4",children:[e.jsx(d,{size:64,className:"text-slate-300 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-2",children:u||"Podcast bulunamadı"}),e.jsx("button",{onClick:()=>x("/podcast"),className:"mt-4 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Podcaste Geri Dön"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs("title",{children:[t.title," | Nipt.tr Podcast"]}),e.jsx("meta",{name:"description",content:t.short_description||`${t.title} bölümünü dinleyin.`}),e.jsx("meta",{property:"og:title",content:t.title}),e.jsx("meta",{property:"og:description",content:t.short_description}),e.jsx("meta",{property:"og:image",content:t.cover_image_url||"https://nipt.tr/og-podcast.png"}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("link",{rel:"canonical",href:`https://nipt.tr/podcast/${t.slug}`})]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#1a365d] via-[#2c5282] to-[#1a365d] text-white",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-6",children:e.jsxs("button",{onClick:()=>x("/podcast"),className:"flex items-center gap-2 text-white/70 hover:text-white transition-colors",children:[e.jsx($,{size:18}),"Tüm Bölümler"]})})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-8",children:[e.jsx("div",{className:"aspect-square rounded-2xl overflow-hidden bg-slate-100 shadow-xl mb-6",children:t.cover_image_url?e.jsx("img",{src:t.cover_image_url,alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-100 to-pink-100",children:e.jsx(d,{size:80,className:"text-purple-300"})})}),t.audio_url?e.jsx("button",{onClick:()=>t&&j(t),className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-xl hover:opacity-90 transition-opacity flex items-center justify-center gap-3 shadow-lg",children:N&&v?.id===t.id?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:24}),o?"Önizleme Çalıyor...":"Dinlemeye Devam Et"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:24,className:"fill-current"}),o?"Önizlemeyi Dinle":"Bölümü Dinle"]})}):e.jsx("p",{className:"text-center text-slate-500 text-sm",children:"Ses dosyası mevcut değil"}),o&&e.jsx("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl max-w-md mx-auto md:mx-0",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-full text-amber-600",children:e.jsx(T,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-900 text-sm",children:"Sadece Önizleme"}),e.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Bu bölümün tamamını dinlemek için ücretsiz üye olun veya giriş yapın."}),e.jsx("a",{href:"/login",className:"inline-block mt-2 text-xs font-bold text-purple-600 hover:underline",children:"Giriş Yap / Üye Ol"})]})]})}),t.external_links&&Object.values(t.external_links).some(Boolean)&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[t.external_links.spotify&&e.jsxs("a",{href:t.external_links.spotify,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(m,{size:14}),"Spotify"]}),t.external_links.apple&&e.jsxs("a",{href:t.external_links.apple,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg text-sm font-medium hover:bg-purple-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(m,{size:14}),"Apple"]}),t.external_links.youtube&&e.jsxs("a",{href:t.external_links.youtube,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(m,{size:14}),"YouTube"]})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-sm text-slate-500",children:[t.publish_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{size:16}),z(t.publish_date)]}),t.duration_seconds&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:16}),w(t.duration_seconds)]})]}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.tags.map(s=>e.jsx("span",{className:"px-3 py-1 bg-purple-50 text-purple-600 rounded-full text-xs font-medium",children:s},s))})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-6",children:t.title}),e.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>f("content"),className:`pb-4 px-6 font-medium transition-colors ${i==="content"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(d,{size:18}),"Bölüm İçeriği"]})}),e.jsx("button",{onClick:()=>f("chat"),className:`pb-4 px-6 font-medium transition-colors ${i==="chat"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(F,{size:18}),"Soru & Cevap"]})})]}),i==="content"&&e.jsxs(e.Fragment,{children:[t.short_description&&e.jsx("p",{className:"text-lg text-slate-600 mb-8 leading-relaxed",children:t.short_description}),t.full_description&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Bölüm Notları"}),e.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:t.full_description}})]}),t.extra_images&&t.extra_images.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(V,{size:20}),"Ek Görseller"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.extra_images.map((s,a)=>e.jsx("button",{onClick:()=>b(s),className:"aspect-video rounded-lg overflow-hidden bg-slate-100 hover:opacity-90 transition-opacity",children:e.jsx("img",{src:s,alt:`Görsel ${a+1}`,className:"w-full h-full object-cover"})},a))})]}),t.extra_videos&&t.extra_videos.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(G,{size:20}),"Ek Videolar"]}),e.jsx("div",{className:"space-y-4",children:t.extra_videos.map((s,a)=>e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-slate-900",children:s.includes("youtube.com")||s.includes("youtu.be")?e.jsx("iframe",{src:s.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/"),className:"w-full h-full",allowFullScreen:!0,title:`Video ${a+1}`}):s.includes("vimeo.com")?e.jsx("iframe",{src:s.replace("vimeo.com","player.vimeo.com/video"),className:"w-full h-full",allowFullScreen:!0,title:`Video ${a+1}`}):e.jsx("video",{src:s,controls:!0,className:"w-full h-full"})},a))})]}),e.jsx("div",{className:"mt-12 p-6 bg-amber-50 border border-amber-200 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(M,{size:24,className:"text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-amber-800 mb-1",children:"Önemli Bilgilendirme"}),e.jsx("p",{className:"text-amber-700 text-sm leading-relaxed",children:"Bu podcast bölümü genel bilgilendirme amaçlıdır ve kişisel tıbbi tavsiye yerine geçmez. Kararlarınızı her zaman kendi hekiminizle birlikte verin."})]})]})})]}),i==="chat"&&e.jsx(R,{contextType:"podcast_detail",contextId:t.id,contextTitle:t.title})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:()=>b(null),children:e.jsx("img",{src:g,alt:"Lightbox",className:"max-w-full max-h-full object-contain"})})]})]})};export{Z as PodcastDetail,Z as default};
